{"ast":null,"code":"import _defineProperty from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _regeneratorRuntime from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{Component,createContext}from\"react\";import ActionTypes from'./actionTypes';import{getUser}from'../services/user';import{COMPLETE_PROFILE}from'../services/utils';var _createContext=createContext(),Provider=_createContext.Provider,Consumer=_createContext.Consumer;var reducer=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(state,action){var userAuth,porcentage,p,i,key,userState;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=action.type;_context.next=_context.t0===ActionTypes.GET_USER?3:_context.t0===ActionTypes.GET_TOKEN?13:_context.t0===ActionTypes.GET_COMPLETE?14:17;break;case 3:_context.next=5;return getUser();case 5:userAuth=_context.sent;if(userAuth==null){window.location=\"/logout\";}porcentage=0;p={};for(i in COMPLETE_PROFILE){p=COMPLETE_PROFILE[i];key=p.label;if(Array.isArray(userAuth[key])){if(p&&userAuth[key].length>0)porcentage=parseFloat(porcentage)+parseFloat(p.value);}else{if(p&&userAuth[key])porcentage=parseFloat(porcentage)+parseFloat(p.value);}}userAuth.porcentage=porcentage;userAuth.complete=porcentage===100;return _context.abrupt(\"return\",{user:userAuth});case 13:return _context.abrupt(\"return\",localStorage.getItem('user-token'));case 14:userState=state.user;userState.porcentage=\"15%\";return _context.abrupt(\"return\",{user:userState});case 17:return _context.abrupt(\"return\",null);case 18:case\"end\":return _context.stop();}}},_callee);}));return function reducer(_x,_x2){return _ref.apply(this,arguments);};}();var ContextStore=/*#__PURE__*/function(_Component){_inherits(ContextStore,_Component);var _super=_createSuper(ContextStore);function ContextStore(){var _this;_classCallCheck(this,ContextStore);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.changeName=function(){_this.setState({user:{full_name:\"John Doe change\"}});};_this.state={user:{full_name:\"\",functions:[],skills:[],state_id:true,languajes:[],educations:[],resume:[],complete:false},dispatch:function(){var _dispatch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(action){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return reducer(_this.state,action);case 2:res=_context2.sent;_this.setState(res);case 4:case\"end\":return _context2.stop();}}},_callee2);}));function dispatch(_x3){return _dispatch.apply(this,arguments);}return dispatch;}()};return _this;}_createClass(ContextStore,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){//console.log(this.state)\n}},{key:\"render\",value:function render(){var _ref2;var store=this.props.store;var dispatch=this.state.dispatch;return/*#__PURE__*/React.createElement(Provider,{value:store?(_ref2={},_defineProperty(_ref2,store,this.state[store]),_defineProperty(_ref2,\"dispatch\",dispatch),_ref2):this.state},this.props.comp);}}]);return ContextStore;}(Component);var WrappreConsumer=function WrappreConsumer(Component){return function(props){return/*#__PURE__*/React.createElement(Consumer,null,function(context){return/*#__PURE__*/React.createElement(Component,Object.assign({},props,{context:context}));});};};export default WrappreConsumer;export{ContextStore};","map":{"version":3,"sources":["/opt/clientoghelp/src/store/index.js"],"names":["React","Component","createContext","ActionTypes","getUser","COMPLETE_PROFILE","Provider","Consumer","reducer","state","action","type","GET_USER","GET_TOKEN","GET_COMPLETE","userAuth","window","location","porcentage","p","i","key","label","Array","isArray","length","parseFloat","value","complete","user","localStorage","getItem","userState","ContextStore","changeName","setState","full_name","functions","skills","state_id","languajes","educations","resume","dispatch","res","store","props","comp","WrappreConsumer","context"],"mappings":"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","sourcesContent":["import React, { Component, createContext} from \"react\";\nimport ActionTypes from './actionTypes'\nimport {getUser} from '../services/user'\nimport {COMPLETE_PROFILE} from '../services/utils'\n\nconst {Provider, Consumer} = createContext()\n\nconst reducer = async (state, action) => {\n    switch(action.type){\n        case ActionTypes.GET_USER : \n            const userAuth = await getUser()\n            if(userAuth == null){\n                window.location = \"/logout\";\n            }\n            \n            var porcentage = 0;\n            var p = {}\n            for (var i in COMPLETE_PROFILE){\n                p = COMPLETE_PROFILE[i]\n                var key = p.label\n\n                if(Array.isArray(userAuth[key])){\n                    if(p && userAuth[key].length > 0)\n                        porcentage = parseFloat(porcentage) + parseFloat(p.value)\n                }else{\n                    if(p && userAuth[key])\n                        porcentage = parseFloat(porcentage) + parseFloat(p.value)\n                }\n            }\n            userAuth.porcentage = porcentage\n            userAuth.complete = porcentage === 100\n            return {user : userAuth}\n        case ActionTypes.GET_TOKEN : \n            return  localStorage.getItem('user-token')\n        case ActionTypes.GET_COMPLETE : \n            var userState = state.user\n            userState.porcentage = \"15%\"\n            return {user : userState}     \n        default :\n            return null;\n    }\n}\n\nclass ContextStore extends Component{\n    componentDidUpdate(){\n        //console.log(this.state)\n    }\n    changeName=()=>{\n        this.setState({user : {full_name : \"John Doe change\"}})\n    }\n    state = {\n        user : {full_name : \"\", functions : [], skills : [], state_id : true, languajes : [], educations : [], resume : [], complete : false},\n        dispatch : async action => {\n            const res = await reducer(this.state, action)\n            this.setState(res)\n        }\n    }\n\n    render(){\n        const {store} = this.props\n        const {dispatch} = this.state\n        return (\n            <Provider value={store?{[store]:this.state[store], dispatch}:this.state}>\n                {this.props.comp}\n            </Provider>\n        )\n    }\n}\n\nconst WrappreConsumer = (Component) => {\n    return (props) => {\n        return (\n            <Consumer>\n                {context => <Component {...props} context={context} />}\n            </Consumer>\n        );\n    };\n}\n\nexport default WrappreConsumer;\nexport {ContextStore}"]},"metadata":{},"sourceType":"module"}