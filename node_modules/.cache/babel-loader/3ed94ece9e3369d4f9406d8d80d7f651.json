{"ast":null,"code":"import _regeneratorRuntime from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Fragment}from'react';import{Helmet}from\"react-helmet\";import{NavLink}from'react-router-dom';import WrapperConsumer from'../store';import{updatePassword}from'../services/user';import'../assets/css/style.css';var ResetPasswordComponent=/*#__PURE__*/function(_React$Component){_inherits(ResetPasswordComponent,_React$Component);var _super=_createSuper(ResetPasswordComponent);function ResetPasswordComponent(props){var _this;_classCallCheck(this,ResetPasswordComponent);_this=_super.call(this,props);_this.repeatpasswordRef=React.createRef();_this.passwordRef=React.createRef();_this.resetPassword=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var user,errors,error,token,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();user={repeatpassword:_this.repeatpasswordRef.current.value,password:_this.passwordRef.current.value};errors=_this.state.errors;error=false;if(user.repeatpassword===\"\"||user.repeatpassword!==\"\"&&user.password!==user.repeatpassword){error=true;errors.repeatPassword=true;_this.setState({errors:errors});}if(user.password===\"\"){error=true;errors.password=true;_this.setState({errors:errors});}if(!(error===false)){_context.next=12;break;}token=_this.props.match.params.token;_context.next=10;return updatePassword(user,token);case 10:res=_context.sent;if(res!==null&&res.status===\"Success\"){_this.setState({successForm:true});_this.props.history.push(\"/recover-password-success\");}else{_this.setState({errorForm:true});}case 12:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={errors:{password:false,repeatPassword:false},successForm:false,errorForm:false};_this.changeInput=_this.changeInput.bind(_assertThisInitialized(_this));return _this;}_createClass(ResetPasswordComponent,[{key:\"componentDidMount\",value:function componentDidMount(){window.scrollTo(0,0);}},{key:\"changeInput\",value:function changeInput(event){var target=event.target;var name=target.name;var errors=this.state.errors;errors[name]=false;this.setState({errors:errors});}},{key:\"render\",value:function render(props){return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"meta\",{charSet:\"utf-8\"}),/*#__PURE__*/React.createElement(\"title\",null,\"Recover password\")),/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"_3psection1_lp-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-pic-1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-content-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-wrapper-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-logo-1\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/\",className:\"aio-logocontainer-1 w-inline-block\"},/*#__PURE__*/React.createElement(\"img\",{src:require('../assets/images/-a3x.png'),alt:\"\",className:\"aoi-logo-2\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-backlink-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-backwrapper-1\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"aoi-headline-1\"},\"Create a new password\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-form-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-form-2 w-form\"},this.state.successForm===false&&/*#__PURE__*/React.createElement(\"form\",{id:\"email-form\",action:\"/recover\",name:\"email-form\",\"data-name\":\"Email Form\",className:\"aoi-form-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-form-4 alt\"},/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-tagfield-1\"},\"New password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",id:\"Email\",name:\"password\",\"data-name\":\"Email\",maxLength:\"256\",className:\"aoi-textfield-1 w-input \".concat(this.state.errors.password?\"warning\":\"\"),ref:this.passwordRef,onChange:this.changeInput})),/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-form-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-tagfield-1\"},\"Confirm new password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",id:\"Email-2\",name:\"repeatpassword\",\"data-name\":\"Email 2\",maxLength:\"256\",className:\"\".concat(this.state.errors.repeatPassword?\"warning\":\"\",\" aoi-textfield-1 w-input\"),ref:this.repeatpasswordRef,onChange:this.changeInput}))),this.state.successForm===true&&this.state.errorForm===false&&/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-success-1 w-form-done\"},/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-success-2\"},\"Thank you! Your submission has been received!\")),this.state.errorForm===true&&this.state.successForm===false&&/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-success-3 w-form-fail\"},/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-success-4\"},\"Oops! Something went wrong.\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-buttonwrapper-1\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:this.resetPassword,className:\"aoi-button-1 w-inline-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"aoi-button-2 alt-1\"},\"Continue\"))))))));}}]);return ResetPasswordComponent;}(React.Component);export default WrapperConsumer(ResetPasswordComponent);","map":{"version":3,"sources":["/opt/clientoghelp/src/components/ResetPasswordComponent.js"],"names":["React","Fragment","Helmet","NavLink","WrapperConsumer","updatePassword","ResetPasswordComponent","props","repeatpasswordRef","createRef","passwordRef","resetPassword","e","preventDefault","user","repeatpassword","current","value","password","errors","state","error","repeatPassword","setState","token","match","params","res","status","successForm","history","push","errorForm","changeInput","bind","window","scrollTo","event","target","name","require","Component"],"mappings":"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","sourcesContent":["import React, {Fragment} from 'react'\nimport {Helmet} from \"react-helmet\";\nimport { NavLink } from 'react-router-dom'\nimport WrapperConsumer from '../store';\nimport { updatePassword } from '../services/user'\nimport '../assets/css/style.css';\n\n\nclass ResetPasswordComponent extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            errors : {\n                password : false,\n                repeatPassword : false\n            },\n            successForm : false,\n            errorForm : false\n        };\n        this.changeInput = this.changeInput.bind(this);\n    }\n\n    repeatpasswordRef = React.createRef()\n    passwordRef = React.createRef()\n    \n    componentDidMount(){\n        window.scrollTo(0, 0)\n    }\n\n    changeInput(event) {\n        const target = event.target;\n        const name = target.name;\n\n        var errors = this.state.errors\n        errors[name] = false\n        this.setState({errors: errors})\n    }\n\n    resetPassword = async (e) => {\n        e.preventDefault()\n        \n        var user = {\n            repeatpassword : this.repeatpasswordRef.current.value,\n            password : this.passwordRef.current.value\n        }\n\n        var errors = this.state.errors\n        var error = false\n        if(user.repeatpassword === \"\" || (user.repeatpassword !== \"\" && user.password !== user.repeatpassword)){\n            error = true\n            errors.repeatPassword = true\n            this.setState({errors: errors})\n        }\n\n        if(user.password === \"\"){\n            error = true\n            errors.password = true\n            this.setState({errors: errors})\n        }\n\n        if(error === false){\n            var token = this.props.match.params.token\n            var res = await updatePassword(user, token)\n\n            if(res !== null && res.status === \"Success\"){\n                this.setState({successForm : true})\n                this.props.history.push(\"/recover-password-success\")\n            }else{\n                this.setState({errorForm : true})\n            }\n        }\n\n    }\n\n    render(props){\n\n        return(\n            <Fragment>\n                <Helmet>\n                    <meta charSet=\"utf-8\" />\n                    <title>Recover password</title>\n                </Helmet>\n                <div className=\"aoi-section\">\n                    <div className=\"_3psection1_lp-2\">\n                    <div className=\"aoi-pic-1\"></div>\n                    <div className=\"aoi-content-1\">\n                        <div className=\"aoi-wrapper-1\">\n                        <div className=\"aoi-logo-1\"><NavLink to=\"/\" className=\"aio-logocontainer-1 w-inline-block\"><img src={require('../assets/images/-a3x.png')} alt=\"\" className=\"aoi-logo-2\"/></NavLink></div>\n                        <div className=\"aoi-backlink-1\">\n                            <div className=\"aoi-backwrapper-1\">\n                            <h1 className=\"aoi-headline-1\">Create a new password</h1>\n                            </div>\n                        </div>\n                        <div className=\"aoi-form-1\">\n                            <div className=\"aoi-form-2 w-form\">\n                            {this.state.successForm === false && \n                            <form id=\"email-form\" action=\"/recover\" name=\"email-form\" data-name=\"Email Form\" className=\"aoi-form-3\">\n                                <div className=\"aoi-form-4 alt\">\n                                <div className=\"aoi-tagfield-1\">New password</div>\n                                <input type=\"password\" id=\"Email\" name=\"password\" data-name=\"Email\" maxLength=\"256\" className={`aoi-textfield-1 w-input ${this.state.errors.password ? \"warning\" : \"\"}`} ref={this.passwordRef} onChange={this.changeInput} /></div>\n                                <div className=\"aoi-form-4\">\n                                <div className=\"aoi-tagfield-1\">Confirm new password</div>\n                                <input type=\"password\" id=\"Email-2\" name=\"repeatpassword\" data-name=\"Email 2\" maxLength=\"256\" className={`${this.state.errors.repeatPassword ? \"warning\" : \"\"} aoi-textfield-1 w-input`} ref={this.repeatpasswordRef} onChange={this.changeInput}/></div>\n                            </form>\n                            }\n                            {this.state.successForm === true && this.state.errorForm === false && \n                            <div className=\"aoi-success-1 w-form-done\">\n                                <div className=\"aoi-success-2\">Thank you! Your submission has been received!</div>\n                            </div>\n                            }\n                            {this.state.errorForm === true && this.state.successForm === false && \n                            <div className=\"aoi-success-3 w-form-fail\">\n                                <div className=\"aoi-success-4\">Oops! Something went wrong.</div>\n                            </div>\n                            }\n                            </div>\n                        </div>\n                        <div className=\"aoi-buttonwrapper-1\">\n                            <button type=\"button\" onClick={this.resetPassword} className=\"aoi-button-1 w-inline-block\">\n                                <div className=\"aoi-button-2 alt-1\">Continue</div>\n                            </button>\n                        </div>\n                        </div>\n                    </div>\n                    </div>\n                </div>\n            </Fragment>\n        );\n    }\n}\nexport default WrapperConsumer(ResetPasswordComponent);"]},"metadata":{},"sourceType":"module"}