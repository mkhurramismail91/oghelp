{"ast":null,"code":"import _regeneratorRuntime from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/opt/clientoghelp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{getURLWithQueryParams}from\"./utils\";export var S3_BUCKET=process.env.REACT_APP_S3_BUCKET;export var getToken=function getToken(){var token=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;token=localStorage.getItem('user-token');return token;};export var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,user,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=_args.length>0&&_args[0]!==undefined?_args[0]:null;token=token==null?getToken():token;_context.next=4;return axios.get(process.env.REACT_APP_API_URL+\"/user\",{headers:{\"user-token\":localStorage.getItem('user-token')}}).then(function(res){if(res.status===200&&res.data.user){var user=res.data.user;localStorage.setItem('user-name',user.full_name);return user;}else{localStorage.removeItem('user-token');return null;}}).catch(function(err){console.log(err);return null;});case 4:user=_context.sent;return _context.abrupt(\"return\",user);case 6:case\"end\":return _context.stop();}}},_callee);}));return function getUser(){return _ref.apply(this,arguments);};}();export var singin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(user){var token;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(process.env.REACT_APP_API_URL+\"/singin\",user).then(function(res){if(res.status===200&&res.data.token){localStorage.setItem(\"user-token\",res.data.token);getUser(res.data.token);return res.data.token;}else{return res.data.code;}}).catch(function(err){console.log(err);return null;});case 2:token=_context2.sent;return _context2.abrupt(\"return\",token);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function singin(_x){return _ref2.apply(this,arguments);};}();export var singup=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(user){var token;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post(process.env.REACT_APP_API_URL+\"/singup\",user).then(function(res){if(res.status===200&&res.data.status===\"success\"){return true;}else{return res.data;}}).catch(function(err,res){console.log(err,res);return null;});case 2:token=_context3.sent;return _context3.abrupt(\"return\",token);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function singup(_x2){return _ref3.apply(this,arguments);};}();export var confirmEmail=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(token){var user;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.post(process.env.REACT_APP_API_URL+\"/user/confirm-email\",{},{headers:{\"user-token\":token}}).then(function(res){if(res.status===200&&res.data.token){localStorage.setItem(\"user-token\",res.data.token);getUser(res.data.token);return res.data.token;}else{return null;}}).catch(function(err){console.log(err);return null;});case 2:user=_context4.sent;return _context4.abrupt(\"return\",user);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function confirmEmail(_x3){return _ref4.apply(this,arguments);};}();export var resendConfirmEmail=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(email){var user;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.get(process.env.REACT_APP_API_URL+\"/user/send-confirm-email/\"+email).then(function(res){if(res.status===200){return true;}else{return null;}}).catch(function(err){console.log(err);return null;});case 2:user=_context5.sent;return _context5.abrupt(\"return\",user);case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function resendConfirmEmail(_x4){return _ref5.apply(this,arguments);};}();export var sendTokenPassword=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(email){var user;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return axios.post(process.env.REACT_APP_API_URL+\"/reset-password\",{email:email}).then(function(res){if(res.status===200){return true;}else{return null;}}).catch(function(err){console.log(err);return null;});case 2:user=_context6.sent;return _context6.abrupt(\"return\",user);case 4:case\"end\":return _context6.stop();}}},_callee6);}));return function sendTokenPassword(_x5){return _ref6.apply(this,arguments);};}();export var updatePassword=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(user,token){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:res=axios.post(process.env.REACT_APP_API_URL+\"/update-password\",user,{headers:{\"user-token\":token}}).then(function(res){//console.log(res)\nreturn res.data;}).catch(function(err){console.log(err);return null;});return _context7.abrupt(\"return\",res);case 2:case\"end\":return _context7.stop();}}},_callee7);}));return function updatePassword(_x6,_x7){return _ref7.apply(this,arguments);};}();export var changePassword=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(user){var token,res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:token=getToken();res=axios.post(process.env.REACT_APP_API_URL+\"/user/update-password\",user,{headers:{\"user-token\":token}}).then(function(res){return res.data;}).catch(function(err){console.log(err);return null;});return _context8.abrupt(\"return\",res);case 3:case\"end\":return _context8.stop();}}},_callee8);}));return function changePassword(_x8){return _ref8.apply(this,arguments);};}();export var desactiveAccount=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var token,res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:token=getToken();res=axios.get(process.env.REACT_APP_API_URL+\"/user/desactive\",{headers:{\"user-token\":token}}).then(function(res){return res.data;}).catch(function(err){console.log(err);return null;});return _context9.abrupt(\"return\",res);case 3:case\"end\":return _context9.stop();}}},_callee9);}));return function desactiveAccount(){return _ref9.apply(this,arguments);};}();export var updateUser=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(user){var token,res;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:token=getToken();res=axios.put(process.env.REACT_APP_API_URL+\"/user/edit\",user,{headers:{\"user-token\":token}}).then(function(res){return res.data;}).catch(function(err){console.log(err);return null;});return _context10.abrupt(\"return\",res);case 3:case\"end\":return _context10.stop();}}},_callee10);}));return function updateUser(_x9){return _ref10.apply(this,arguments);};}();export var LINKEDIN_STATE=['singin_string','singup_string'];var LINKEDIN_SCOPE='r_liteprofile r_emailaddress';var LINKEDIN_RIDERECT=process.env.REACT_APP_REDIRECT_URI;var LINKEDIN_CLIENT_ID=process.env.REACT_APP_CLIENT_ID;export var LINKEDIN_URL=getURLWithQueryParams('https://www.linkedin.com/oauth/v2/authorization',{response_type:\"code\",client_id:LINKEDIN_CLIENT_ID,redirect_uri:LINKEDIN_RIDERECT,state:LINKEDIN_STATE[0],scope:LINKEDIN_SCOPE});export var SINGUP_LINKEDIN_URL=getURLWithQueryParams('https://www.linkedin.com/oauth/v2/authorization',{response_type:\"code\",client_id:LINKEDIN_CLIENT_ID,redirect_uri:LINKEDIN_RIDERECT,state:LINKEDIN_STATE[1],scope:LINKEDIN_SCOPE});export var singinLinkedin=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(params){var token;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:console.log(params);_context11.next=3;return axios.get(process.env.REACT_APP_API_URL+\"/login-linkedin?code=\"+params.code+\"&state=\"+params.state).then(function(res){//console.log(res)\nif(res.status===200&&res.data.token){localStorage.setItem(\"user-token\",res.data.token);getUser(res.data.token);return res.data.token;}else if(res.data.code===301){return{code:301};}else if(res.data.code===303){return{code:303,email:res.data.email};}else{return null;}}).catch(function(err){console.log(err);return null;});case 3:token=_context11.sent;return _context11.abrupt(\"return\",token);case 5:case\"end\":return _context11.stop();}}},_callee11);}));return function singinLinkedin(_x10){return _ref11.apply(this,arguments);};}();export var registerLinkedin=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(params){var user;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:console.log(params);_context12.next=3;return axios.get(process.env.REACT_APP_API_URL+\"/register-linkedin?code=\"+params.code+\"&state=\"+params.state).then(function(res){console.log(res);if(res.status===200&&res.data){return res.data;}}).catch(function(err){console.log(err);return null;});case 3:user=_context12.sent;return _context12.abrupt(\"return\",user);case 5:case\"end\":return _context12.stop();}}},_callee12);}));return function registerLinkedin(_x11){return _ref12.apply(this,arguments);};}();export var singoutLinkedin=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(){var LINKEDIN_LOGOUT_URL,token;return _regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:LINKEDIN_LOGOUT_URL=getURLWithQueryParams('https://www.linkedin.com/oauth/v2/invalidateToken',{response_type:\"code\",client_id:LINKEDIN_CLIENT_ID,redirect_uri:LINKEDIN_RIDERECT,state:LINKEDIN_STATE,scope:LINKEDIN_SCOPE});_context13.next=3;return axios.get(LINKEDIN_LOGOUT_URL).then(function(res){console.log(res);return res;}).catch(function(err){console.log(err);return null;});case 3:token=_context13.sent;return _context13.abrupt(\"return\",token);case 5:case\"end\":return _context13.stop();}}},_callee13);}));return function singoutLinkedin(){return _ref13.apply(this,arguments);};}();","map":{"version":3,"sources":["/opt/clientoghelp/src/services/user.js"],"names":["axios","getURLWithQueryParams","S3_BUCKET","process","env","REACT_APP_S3_BUCKET","getToken","token","localStorage","getItem","getUser","get","REACT_APP_API_URL","headers","then","res","status","data","user","setItem","full_name","removeItem","catch","err","console","log","singin","post","code","singup","confirmEmail","resendConfirmEmail","email","sendTokenPassword","updatePassword","changePassword","desactiveAccount","updateUser","put","LINKEDIN_STATE","LINKEDIN_SCOPE","LINKEDIN_RIDERECT","REACT_APP_REDIRECT_URI","LINKEDIN_CLIENT_ID","REACT_APP_CLIENT_ID","LINKEDIN_URL","response_type","client_id","redirect_uri","state","scope","SINGUP_LINKEDIN_URL","singinLinkedin","params","registerLinkedin","singoutLinkedin","LINKEDIN_LOGOUT_URL"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { getURLWithQueryParams } from \"./utils\"\n\nexport const S3_BUCKET = process.env.REACT_APP_S3_BUCKET;\nexport const getToken = (token = null) => {\n    token = localStorage.getItem('user-token')\n    return token;\n}\nexport const getUser = async (token = null) => {\n    token = (token == null) ? getToken() : token\n    var user = await axios.get(process.env.REACT_APP_API_URL+\"/user\", {headers : {\"user-token\": localStorage.getItem('user-token')}})\n    .then(res => {\n        if(res.status === 200 && res.data.user){\n            var user = res.data.user\n\n            localStorage.setItem('user-name', user.full_name) \n            return user;\n        }else{\n            localStorage.removeItem('user-token') \n            return null;\n        }\n    })\n    .catch(err => {\n        console.log(err)\n        return null;\n    })\n\n    return user;\n};\n\n\nexport const singin = async (user) => {\n    var token = await axios.post(process.env.REACT_APP_API_URL+\"/singin\", user)\n        .then(res => {\n            if(res.status === 200 && res.data.token){\n                localStorage.setItem(\"user-token\", res.data.token)\n                getUser(res.data.token)\n                return res.data.token;\n            }else{\n                return res.data.code\n            }\n        })\n        .catch(err => {\n            console.log(err)\n            return null;\n        })\n\n    return token;\n};\n\n\nexport const singup = async (user) => {\n    var token = await axios.post(process.env.REACT_APP_API_URL+\"/singup\", user)\n        .then(res => {\n            if(res.status === 200 && res.data.status === \"success\"){\n                return true;\n            }else{\n                return res.data;\n            }\n        })\n        .catch((err, res) => {\n            console.log(err, res)\n            return null;\n        })\n\n    return token;\n};\n\nexport const confirmEmail = async (token) => {\n    var user = await axios.post(process.env.REACT_APP_API_URL+\"/user/confirm-email\",{}, {headers : {\"user-token\": token}})\n        .then(res => {\n            if(res.status === 200 && res.data.token){\n                localStorage.setItem(\"user-token\", res.data.token)\n                getUser(res.data.token)\n                return res.data.token;\n            }else{\n                return null;\n            }\n        })\n        .catch(err => {\n            console.log(err)\n            return null;\n        })\n\n    return user;\n};\n\nexport const resendConfirmEmail = async (email) => {\n    var user = await axios.get(process.env.REACT_APP_API_URL+\"/user/send-confirm-email/\"+email)\n        .then(res => {\n            if(res.status === 200){\n                return true;\n            }else{\n                return null;\n            }\n        })\n        .catch(err => {\n            console.log(err)\n            return null;\n        })\n\n    return user;\n};\n\n\nexport const sendTokenPassword = async (email) => {\n    var user = await axios.post(process.env.REACT_APP_API_URL+\"/reset-password\", {email : email})\n        .then(res => {\n            if(res.status === 200){\n                return true;\n            }else{\n                return null;\n            }\n        })\n        .catch(err => {\n            console.log(err)\n            return null;\n        })\n\n    return user;\n};\n\n\nexport const updatePassword = async (user, token) => {\n    var res = axios.post(process.env.REACT_APP_API_URL+\"/update-password\", user, {headers : {\"user-token\": token}})\n        .then(res => {\n            //console.log(res)\n            return res.data\n        })\n        .catch(err => {\n            console.log(err)\n            return null\n        })\n    return res\n}\n\n\nexport const changePassword = async (user) => {\n    var token = getToken()\n    var res = axios.post(process.env.REACT_APP_API_URL+\"/user/update-password\", user, {headers : {\"user-token\": token}})\n        .then(res => {\n            return res.data\n        })\n        .catch(err => {\n            console.log(err)\n            return null\n        })\n    return res\n}\n\nexport const desactiveAccount = async () => {\n    var token = getToken()\n    var res = axios.get(process.env.REACT_APP_API_URL+\"/user/desactive\", {headers : {\"user-token\": token}})\n        .then(res => {\n            return res.data\n        })\n        .catch(err => {\n            console.log(err)\n            return null\n        })\n    return res\n}\n\nexport const updateUser = async (user) => {\n    var token = getToken()\n    var res = axios.put(process.env.REACT_APP_API_URL+\"/user/edit\", user, {headers : {\"user-token\": token}})\n        .then(res => {\n            return res.data\n        })\n        .catch(err => {\n            console.log(err)\n            return null\n        })\n    return res\n}\n\n\nexport const LINKEDIN_STATE = ['singin_string', 'singup_string']\n\nconst LINKEDIN_SCOPE = 'r_liteprofile r_emailaddress'\nconst LINKEDIN_RIDERECT = process.env.REACT_APP_REDIRECT_URI\nconst LINKEDIN_CLIENT_ID = process.env.REACT_APP_CLIENT_ID\n\nexport const LINKEDIN_URL = getURLWithQueryParams('https://www.linkedin.com/oauth/v2/authorization', {\n  response_type: \"code\",\n  client_id: LINKEDIN_CLIENT_ID,\n  redirect_uri: LINKEDIN_RIDERECT,\n  state: LINKEDIN_STATE[0],\n  scope: LINKEDIN_SCOPE\n})\n\nexport const SINGUP_LINKEDIN_URL = getURLWithQueryParams('https://www.linkedin.com/oauth/v2/authorization', {\n  response_type: \"code\",\n  client_id: LINKEDIN_CLIENT_ID,\n  redirect_uri: LINKEDIN_RIDERECT,\n  state: LINKEDIN_STATE[1],\n  scope: LINKEDIN_SCOPE\n})\n\nexport const singinLinkedin = async (params) => {\nconsole.log(params)\n    var token = await axios.get(process.env.REACT_APP_API_URL+\"/login-linkedin?code=\"+params.code+\"&state=\"+params.state)\n        .then(res => {\n            //console.log(res)\n            if(res.status === 200 && res.data.token){\n                localStorage.setItem(\"user-token\", res.data.token)\n                getUser(res.data.token)\n                return res.data.token;\n            }else if(res.data.code === 301){\n                return {code : 301};\n            }else if(res.data.code === 303){\n                return {code : 303, email : res.data.email};\n            }else{\n                return null\n            }\n            \n        })\n        .catch(err => {\n            console.log(err)\n            return null;\n        })\n\n    return token;\n};\n\nexport const registerLinkedin = async (params) => {\n    console.log(params)\n    var user = await axios.get(process.env.REACT_APP_API_URL+\"/register-linkedin?code=\"+params.code+\"&state=\"+params.state)\n        .then(res => {\n            console.log(res)\n            if(res.status === 200 && res.data){\n                return res.data;\n            }\n        })\n        .catch(err => {\n            console.log(err)\n            return null;\n        })\n\n    return user;\n};\n\nexport const singoutLinkedin = async () => {\n     const LINKEDIN_LOGOUT_URL = getURLWithQueryParams('https://www.linkedin.com/oauth/v2/invalidateToken', {\n        response_type: \"code\",\n        client_id: LINKEDIN_CLIENT_ID,\n        redirect_uri: LINKEDIN_RIDERECT,\n        state: LINKEDIN_STATE,\n        scope: LINKEDIN_SCOPE\n        })\n        var token = await axios.get(LINKEDIN_LOGOUT_URL)\n            .then(res => {\n                console.log(res)\n                return res\n            })\n            .catch(err => {\n                console.log(err)\n                return null;\n            })\n    \n        return token;\n    };\n\n\n\n"]},"metadata":{},"sourceType":"module"}